<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="开发基础知识," />










<meta name="description" content="Tomcat的简单了解">
<meta property="og:type" content="article">
<meta property="og:title" content="Tomcat了解">
<meta property="og:url" content="http://example.com/posts/17791.html">
<meta property="og:site_name" content="主页">
<meta property="og:description" content="Tomcat的简单了解">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124151921260.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124152647022.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124152834182.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124153500312.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124153649884.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124153857562.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124155257572.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124154954905.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124155911292.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124155921261.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124160408166.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124163451368.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124164956183.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124171430036.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124171730103.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240124172115353.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125165751241.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125170341590.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125170435272.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125170917030.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125171041454.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125170731759.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125171236130.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125173409458.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125173553791.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125173602332.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125174050855.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125174330418.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125174444197.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125174514355.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125174541285.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125174723476.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125175016739.png">
<meta property="og:image" content="http://example.com/posts/17791/image-20240125175226246.png">
<meta property="article:published_time" content="2024-01-24T06:08:36.000Z">
<meta property="article:modified_time" content="2024-01-26T02:15:19.615Z">
<meta property="article:author" content="Xu Zhipeng">
<meta property="article:tag" content="开发基础知识">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/posts/17791/image-20240124151921260.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/posts/17791.html"/>





  <title>Tomcat了解 | 主页</title>
  








<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="主页" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">主页</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">xzp个人小站</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/posts/17791.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="主页">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Tomcat了解</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-24T14:08:36+08:00">
                2024-01-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.9k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  7
                </span>
              
            </div>
          

          
              <div class="post-description">
                  Tomcat的简单了解
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h1><h2 id="Tomcat是什么"><a href="#Tomcat是什么" class="headerlink" title="Tomcat是什么"></a>Tomcat是什么</h2><p>我们开发的<code>App</code>后端需要部署到服务器上才能运行，而服务器需要配置必要的环境才能支持<code>App</code>的运行，比如一个<code>java</code>程序，需要配置<code>JRE</code>环境和<code>Tomcat</code>（<code>java</code>实现的服务器软件，运行在<code>JRE</code>环境中，专门用于运行<code>web</code>应用程序），相当于是由<code>Tomcat</code>来运行<code>java</code>程序</p>
<p>简单理解：<code>JRE</code>是靶场，<code>Tomcat</code>是枪，我们的<code>App</code>是子弹</p>
<p>类似的服务器软件还包括<code>Jetty</code>、<code>JBoss</code>、<code>Resin</code>等等，<code>Tomcat</code>应用最为广泛，技术先进、性能稳定、项目开源还免费</p>
<h2 id="安装和配置"><a href="#安装和配置" class="headerlink" title="安装和配置"></a>安装和配置</h2><p><a target="_blank" rel="noopener" href="https://tomcat.apache.org/">Apache Tomcat® - Welcome!</a></p>
<p><img src="/posts/17791/image-20240124151921260.png" alt="image-20240124151921260"></p>
<p><strong>导包问题</strong></p>
<blockquote>
<p>Users of Tomcat 10 onwards should be aware that, as a result of the move from Java EE to Jakarta EE as part of the transfer of Java EE to the Eclipse Foundation, the primary package for all implemented APIs has changed from <strong><code>javax.*</code> to <code>jakarta.*</code></strong>. This will almost certainly require code changes to enable applications to migrate from Tomcat 9 and earlier to Tomcat 10 and later. A <a target="_blank" rel="noopener" href="https://github.com/apache/tomcat-jakartaee-migration">migration tool</a> has been developed to aid this process.</p>
</blockquote>
<p><strong>版本匹配问题</strong></p>
<p><img src="/posts/17791/image-20240124152647022.png" alt="image-20240124152647022"></p>
<p><strong>下载包</strong></p>
<p><img src="/posts/17791/image-20240124152834182.png" alt="image-20240124152834182"></p>
<p><strong>配置环境变量</strong></p>
<ol>
<li><p>需要保证电脑已经配置好<code>JAVA_HOME</code>[系统变量以及<code>Path</code>]，注意用户变量有可能覆盖系统变量，<code>java -version</code>验证是否配置成果</p>
<p><img src="/posts/17791/image-20240124153500312.png" alt="image-20240124153500312" style="zoom: 25%;"><img src="/posts/17791/image-20240124153649884.png" alt="image-20240124153649884" style="zoom:25%;"><img src="/posts/17791/image-20240124153857562.png" alt="image-20240124153857562" style="zoom:25%;"></p>
</li>
<li><p>解压压缩包到合适的目录</p>
</li>
<li><p>打印日志中文原本是乱码，这是因为默认使用<code>UTF-8</code>打印日志，应该在<code>conf/logging.properties</code>中将<code>java.util.logging.ConsoleHandler.encoding</code>修改为<code>GBK</code></p>
</li>
<li><p>双击<code>bin/startup.bat</code>启动<code>Tomcat</code>[点击<code>shutdown.bat</code>或者直接关闭<code>cmd</code>就关闭了]，检查输出指令没有异常，打开本地<code>8080</code>端口</p>
<p><img src="/posts/17791/image-20240124155257572.png" alt="image-20240124155257572" style="zoom: 25%;"><img src="/posts/17791/image-20240124154954905.png" alt="image-20240124154954905" style="zoom: 25%;"></p>
</li>
<li><p>配置系统变量[没有必要配置，因为一台机器可能会部署多个<code>Tomcat</code>版本，后续可以关联到<code>IDEA</code>，如果配置了该环境变量，那么即便打开的是其他版本的<code>startup.bat</code>，启动的也是环境变量的版本，但是如果部署到<code>Linux</code>服务器上时就需要配置环境变量了]</p>
<p><img src="/posts/17791/image-20240124155911292.png" alt="image-20240124155855309" style="zoom: 25%;"><img src="/posts/17791/image-20240124155921261.png" alt="image-20240124155921261" style="zoom: 25%;"></p>
</li>
<li><p>验证是否配置成功，直接<code>cmd</code>输入<code>startup.bat</code>能够运行成果</p>
</li>
</ol>
<p><img src="/posts/17791/image-20240124160408166.png" alt="image-20240124160408166"></p>
<h2 id="目录详解"><a href="#目录详解" class="headerlink" title="目录详解"></a>目录详解</h2><ul>
<li><p><code>bin</code>：该目录下存放的是二进制可执行文件。如果是安装版，那么这个目录下会有两个<code>exe</code>文件：<code>tomcat10.exe</code>、<code>tomcat10w.exe</code>，前者是在控制台下启动<code>Tomcat</code>，后者是弹出<code>GUI</code>窗口启动<code>Tomcat</code>；如果是解压版，那么会有<code>startup.bat</code>和<code>shutdown.bat</code>文件，<code>startup.bat</code>用来启动<code>Tomcat</code>，但需要先配置<code>JAVA_HOME</code>环境变量才能启动，<code>shutdown.bat</code>用来停止<code>Tomcat</code>；</p>
</li>
<li><p><code>conf</code>：配置目录，用于配置<code>Tomcat</code>的相关信息</p>
<ul>
<li><p><code>server.xml</code>：配置整个服务器信息，包括修改端口号[默认8080]</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">maxParameterCount</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">               /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>logging.properties</code>：配置打印日志的行为</p>
</li>
<li><p><code>tomcat-users.xml</code>：后台管理需要配置账号密码</p>
</li>
<li><p><code>web.xml</code>：控制所部署项目的公共属性</p>
</li>
<li><p><code>Catalina</code>：引擎相关的配置</p>
</li>
</ul>
</li>
<li><p><code>lib</code>：<code>Tomcat</code>的类库，<code>web</code>项目所导入的<strong>公共</strong><code>jar</code>包也可以放到<code>lib</code>里</p>
</li>
<li><p><code>logs</code>：记录日志，以文件的形式存储，包括<code>cmd</code>的输出、访问请求历史记录，可以定期清理</p>
</li>
<li><p><code>temp</code>：临时文件</p>
</li>
<li><p><strong><code>webapps</code></strong>：存放<code>web</code>项目的文件夹，其中每个文件夹都是一个项目；如果这个目录下已经存在了目录，那么都是<code>Tomcat</code>自带的项目。其中<code>ROOT</code>是一个特殊的项目，在地址栏中访问<a href="http://127.0.0.1:8080，没有给出项目目录时，对应的就是`ROOT`项目。如果访问http://localhost:8080/examples，就会进入示例项目。其中`examples`就是项目名，即文件夹的名字">http://127.0.0.1:8080，没有给出项目目录时，对应的就是`ROOT`项目。如果访问http://localhost:8080/examples，就会进入示例项目。其中`examples`就是项目名，即文件夹的名字</a></p>
</li>
</ul>
<p><img src="/posts/17791/image-20240124163451368.png" alt="image-20240124163451368" style="zoom:25%;"></p>
<ul>
<li><code>work</code>：运行时生成的文件，与<code>JSP</code>密切相关，现在基本用不到了，最终运行的文件都在这里。通过<code>webapps</code>中的项目生成的！可以把这个目录下的内容删除，再次运行时会生再次生成<code>work</code>目录。当客户端用户访问一个<code>JSP</code>文件时，<code>Tomcat</code>会通过<code>JSP</code>生成<code>Java</code>文件，然后再编译<code>Java</code>文件生成<code>class</code>文件，生成的<code>java</code>和<code>class</code>文件都会存放到这个目录下。</li>
<li><code>LICENSE</code>：许可证</li>
<li><code>NOTICE</code>：说明文件</li>
</ul>
<h2 id="web应用的标准结构"><a href="#web应用的标准结构" class="headerlink" title="web应用的标准结构"></a>web应用的标准结构</h2><p>一个可以用于发布的标准<code>Web</code>项目的结构如下：</p>
<ul>
<li><p><code>app</code></p>
<ul>
<li><p><code>static</code><strong>[比较随意]</strong></p>
<ul>
<li><code>css</code></li>
<li><code>img</code></li>
<li><code>js</code></li>
</ul>
</li>
<li><p><code>WEB-INF</code>：该目录下的资源是受保护的，不可通过浏览器或者客户端直接访问<strong>[强制约束]</strong></p>
<p>  <img src="/posts/17791/image-20240124164956183.png" alt="image-20240124164956183"></p>
<ul>
<li><p><code>classes</code>：字节码根路径，<code>java</code>代码经过编译得到的<code>.class</code>文件就存放在这里</p>
</li>
<li><p><code>lib</code>：导入的第三方依赖<code>jar</code>包，比如连接数据库的<code>MySQL</code>驱动包</p>
<p>  <code>web.xml</code>：当前项目的配置文件</p>
<p><code>index.html</code>：主页文件</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="部署项目方式"><a href="#部署项目方式" class="headerlink" title="部署项目方式"></a>部署项目方式</h2><ol>
<li>直接部署：直接将编译好的项目放在<code>webapp</code>目录下</li>
<li>war包部署：将编译好的项目打成<code>war</code>包放在<code>webapps</code>目录下，<code>Tomcat</code>启动后会自动解压<code>war</code>包（和第一种一样）</li>
<li>映射部署：可以将项目放在非<code>webapps</code>的其他目录下，在<code>tomcat</code>中通过配置文件指向<code>app</code>的实际磁盘路径</li>
</ol>
<p><strong>映射部署</strong></p>
<p>只需要在<code>conf/Catalina/localhost</code>目录下创建一个<code>examples.xml</code>文件[和项目同名，三个名称保持一致]</p>
<p><img src="/posts/17791/image-20240124171430036.png" alt="image-20240124171430036"></p>
<p>日志证明使用了映射部署方式</p>
<p><img src="/posts/17791/image-20240124171730103.png" alt="image-20240124171730103" style="zoom:25%;"></p>
<p><code>url</code>的组成部分和项目种资源的对应关系图</p>
<p><img src="/posts/17791/image-20240124172115353.png" alt="image-20240124172115353" style="zoom:25%;"></p>
<ol>
<li><p>资源路径不一定完全等同于项目中的资源</p>
</li>
<li><p><code>ROOT</code>项目不需要上下文，直接跟资源路径即可</p>
</li>
<li><p><code>manager</code>和<code>host-manager</code>项目需要输入账号和密码，通过<code>conf/tomcat-users.xml</code>进行配置</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tomcat-users</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://tomcat.apache.org/xml&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://tomcat.apache.org/xml tomcat-users.xsd&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">user</span> <span class="attr">username</span>=<span class="string">&quot;admin&quot;</span> <span class="attr">password</span>=<span class="string">&quot;123456&quot;</span> <span class="attr">roles</span>=<span class="string">&quot;manager-gui&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">user</span> <span class="attr">username</span>=<span class="string">&quot;robot&quot;</span> <span class="attr">password</span>=<span class="string">&quot;123456&quot;</span> <span class="attr">roles</span>=<span class="string">&quot;manager-script&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tomcat-users</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="IDEA关联Tomcat"><a href="#IDEA关联Tomcat" class="headerlink" title="IDEA关联Tomcat"></a>IDEA关联Tomcat</h2><p><code>javaweb</code>工程（包括<code>html</code>、<code>css</code>、<code>js</code>、<code>.java</code>、<code>lib</code>、<code>web.xml</code>等文件）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR;</span><br><span class="line">    javaweb工程--&gt;|构建|App--&gt;|部署|Tomcat中的webApp;</span><br></pre></td></tr></table></figure>
<p>上述过程均可以使用<code>IDEA</code>进行实现</p>
<ol>
<li><p>建立<code>IDEA</code>和<code>Tomcat</code>的关联（可以关联多个，开发时可选）</p>
<p> <img src="/posts/17791/image-20240125165751241.png" alt="image-20240125165751241" style="zoom:25%;"></p>
</li>
<li><p>创建一个<code>javaweb</code>工程</p>
<ol>
<li><p>创建<code>web-all</code>文件夹用于管理所有<code>web</code>项目</p>
</li>
<li><p>用<code>IDEA</code>打开该文件夹，将其转化为工作目录，并进行初始设置，包括SDK、语言级别、输出文件夹等</p>
<p> <img src="/posts/17791/image-20240125170341590.png" alt="image-20240125170341590" style="zoom:25%;"></p>
</li>
</ol>
</li>
<li><p>创建项目</p>
<ol>
<li><p>创建项目</p>
<p><img src="/posts/17791/image-20240125170435272.png" alt="image-20240125170435272" style="zoom:25%;"></p>
<p>用模块创建项目，能够避免多个项目频繁切换</p>
</li>
<li><p>转化为<code>web</code>项目</p>
<p><img src="/posts/17791/image-20240125170917030.png" alt="image-20240125170917030" style="zoom:25%;"><img src="/posts/17791/image-20240125171041454.png" alt="image-20240125171041454" style="zoom: 25%;"></p>
<p>添加<code>Tomcat</code>依赖</p>
<p><img src="/posts/17791/image-20240125170731759.png" alt="image-20240125170731759" style="zoom:25%;"><img src="/posts/17791/image-20240125171236130.png" alt="image-20240125171236130" style="zoom:25%;"></p>
<p>初始化工程目录（右键“将目录标记为” “添加为库” 或者 ）</p>
<p><img src="/posts/17791/image-20240125173409458.png" alt="image-20240125173409458" style="zoom:25%;"></p>
</li>
</ol>
</li>
<li><p>将工程构建成一个可以发布的<code>App</code></p>
<p> <img src="/posts/17791/image-20240125173553791.png" alt="image-20240125173553791" style="zoom:25%;"><img src="/posts/17791/image-20240125173602332.png" alt="image-20240125173602332" style="zoom:25%;"><img src="/posts/17791/image-20240125174050855.png" alt="image-20240125174050855" style="zoom:25%;"></p>
<p> 因为<code>static</code>文件夹中没有有效的文件，所以构建后抛弃了该文件夹</p>
<p> <code>classes</code>就是前面的<code>src</code>和<code>resources</code>编译后合并得到的字节码</p>
</li>
<li><p>将<code>App</code>部署到<code>Tomcat</code>中，启动运行</p>
<p> 添加<code>Tomcat</code>运行配置</p>
<p> <img src="/posts/17791/image-20240125174330418.png" alt="image-20240125174330418"><img src="/posts/17791/image-20240125174444197.png" alt="image-20240125174444197" style="zoom:25%;"><img src="/posts/17791/image-20240125174514355.png" alt="image-20240125174514355" style="zoom:25%;"><img src="/posts/17791/image-20240125174541285.png" alt="image-20240125174541285" style="zoom:25%;"></p>
<p> 实际运行</p>
<p> <img src="/posts/17791/image-20240125174723476.png" alt="image-20240125174723476"></p>
<p> 两种输出日志，服务器日志正常，但是Tomcat Catalina日志乱码</p>
<p> <img src="/posts/17791/image-20240125175016739.png" alt="image-20240125175016739" style="zoom:25%;"></p>
<p> 在<a href="Tomcat/conf">Tomcat/conf</a>中的<code>logging.properties</code>将<code>1catalina.org.apache.juli.AsyncFileHandler.encoding</code>修改为<code>GBK</code>，原本是<code>UTF-8</code></p>
<p> <img src="/posts/17791/image-20240125175226246.png" alt="image-20240125175226246" style="zoom:25%;"></p>
</li>
</ol>
<blockquote>
<p>实际上不需要构建输出到<code>out</code>也可以直接运行，<code>IDEA</code>的部署原理实际上就是对<code>Tomcat</code>进行一次拷贝，然后在副本中进行部署，而副本中存放仅仅和需要部署的项目相关的配置文件，实际的运行是用原本的<code>Tomcat</code>软件使用副本的配置文件来运行<code>javaweb</code>项目</p>
</blockquote>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag"># 开发基础知识</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/52196.html" rel="next" title="Git">
                <i class="fa fa-chevron-left"></i> Git
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/22370.html" rel="prev" title="设计模式-面向对象程序设计">
                设计模式-面向对象程序设计 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
                <a href="/archives">
                  <span class="site-state-item-count">67</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            


            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xzp314" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:seu_xuzhipeng@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Tomcat"><span class="nav-number">1.</span> <span class="nav-text">Tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Tomcat%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">1.1.</span> <span class="nav-text">Tomcat是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.</span> <span class="nav-text">安装和配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E8%AF%A6%E8%A7%A3"><span class="nav-number">1.3.</span> <span class="nav-text">目录详解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#web%E5%BA%94%E7%94%A8%E7%9A%84%E6%A0%87%E5%87%86%E7%BB%93%E6%9E%84"><span class="nav-number">1.4.</span> <span class="nav-text">web应用的标准结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%E6%96%B9%E5%BC%8F"><span class="nav-number">1.5.</span> <span class="nav-text">部署项目方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IDEA%E5%85%B3%E8%81%94Tomcat"><span class="nav-number">1.6.</span> <span class="nav-text">IDEA关联Tomcat</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xu Zhipeng</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">239.7k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  


  

  

</body>
</html>
